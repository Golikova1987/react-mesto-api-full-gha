{"ast":null,"code":"import _slicedToArray from\"C:/Users/User/Desktop/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import api from\"../../utils/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Likes(_ref){var likes=_ref.likes,myid=_ref.myid,cardid=_ref.cardid;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLike=_useState2[0],setIsLike=_useState2[1];var _useState3=useState(likes.length),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];useEffect(function(){setIsLike(likes.some(function(element){return myid===element._id;}));},[likes,myid]);function handleCardLike(){if(isLike){api.deleteLike(cardid).then(function(res){setIsLike(false);setCount(res.likes.length);}).catch(function(err){return console.error(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0441\\u043D\\u044F\\u0442\\u0438\\u044F \\u043B\\u0430\\u0439\\u043A\\u0430 \".concat(err));});}else{api.addLike(cardid).then(function(res){setIsLike(true);setCount(res.likes.length);}).catch(function(err){return console.error(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u043F\\u0440\\u0438 \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0438 \\u043B\\u0430\\u0439\\u043A\\u0430 \".concat(err));});}}return/*#__PURE__*/_jsxs(\"div\",{className:\"cards__like-elements\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cards__button-like \".concat(isLike?'cards__button-like_active':''),type:\"button\",onClick:handleCardLike}),/*#__PURE__*/_jsx(\"span\",{className:\"cards__number-likes\",children:count})]});}","map":{"version":3,"names":["useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","Likes","_ref","likes","myid","cardid","_useState","_useState2","_slicedToArray","isLike","setIsLike","_useState3","length","_useState4","count","setCount","some","element","_id","handleCardLike","deleteLike","then","res","catch","err","console","error","concat","addLike","className","children","type","onClick"],"sources":["C:/Users/User/Desktop/dev/react-mesto-auth/src/components/Likes/Likes.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport api from \"../../utils/api\"\r\n\r\nexport default function Likes({ likes, myid, cardid}) {\r\n  const [isLike, setIsLike] = useState(false)\r\n  const [count, setCount] =useState(likes.length)\r\n\r\n  useEffect(() => {\r\n    setIsLike(likes.some(element => myid === element._id))\r\n  }, [likes, myid])\r\n\r\n  function handleCardLike() {\r\n    if (isLike) {\r\n      api.deleteLike(cardid)\r\n        .then(res => {\r\n          setIsLike(false)\r\n          setCount(res.likes.length)\r\n        })\r\n        .catch((err) => console.error(`Ошибка снятия лайка ${err}`))\r\n    } else {\r\n      api.addLike(cardid)\r\n        .then(res => {\r\n          setIsLike(true)\r\n          setCount(res.likes.length)\r\n        })\r\n        .catch((err) => console.error(`Ошибка при добавлении лайка ${err}`))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"cards__like-elements\">\r\n      <button className={`cards__button-like ${isLike ? 'cards__button-like_active' : ''}`} type=\"button\" onClick={handleCardLike}/>\r\n      <span className=\"cards__number-likes\">{count}</span>\r\n    </div>\r\n  )\r\n}"],"mappings":"gIAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,GAAG,KAAM,iBAAiB,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEjC,cAAe,SAAS,CAAAC,KAAKA,CAAAC,IAAA,CAAyB,IAAtB,CAAAC,KAAK,CAAAD,IAAA,CAALC,KAAK,CAAEC,IAAI,CAAAF,IAAA,CAAJE,IAAI,CAAEC,MAAM,CAAAH,IAAA,CAANG,MAAM,CACjD,IAAAC,SAAA,CAA4BX,QAAQ,CAAC,KAAK,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAApCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IACxB,IAAAI,UAAA,CAAyBhB,QAAQ,CAACQ,KAAK,CAACS,MAAM,CAAC,CAAAC,UAAA,CAAAL,cAAA,CAAAG,UAAA,IAAxCG,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IAEtBnB,SAAS,CAAC,UAAM,CACdgB,SAAS,CAACP,KAAK,CAACa,IAAI,CAAC,SAAAC,OAAO,QAAI,CAAAb,IAAI,GAAKa,OAAO,CAACC,GAAG,GAAC,CAAC,CACxD,CAAC,CAAE,CAACf,KAAK,CAAEC,IAAI,CAAC,CAAC,CAEjB,QAAS,CAAAe,cAAcA,CAAA,CAAG,CACxB,GAAIV,MAAM,CAAE,CACVb,GAAG,CAACwB,UAAU,CAACf,MAAM,CAAC,CACnBgB,IAAI,CAAC,SAAAC,GAAG,CAAI,CACXZ,SAAS,CAAC,KAAK,CAAC,CAChBK,QAAQ,CAACO,GAAG,CAACnB,KAAK,CAACS,MAAM,CAAC,CAC5B,CAAC,CAAC,CACDW,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,KAAK,6GAAAC,MAAA,CAAwBH,GAAG,CAAE,CAAC,GAAC,CAChE,CAAC,IAAM,CACL5B,GAAG,CAACgC,OAAO,CAACvB,MAAM,CAAC,CAChBgB,IAAI,CAAC,SAAAC,GAAG,CAAI,CACXZ,SAAS,CAAC,IAAI,CAAC,CACfK,QAAQ,CAACO,GAAG,CAACnB,KAAK,CAACS,MAAM,CAAC,CAC5B,CAAC,CAAC,CACDW,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,KAAK,wJAAAC,MAAA,CAAgCH,GAAG,CAAE,CAAC,GAAC,CACxE,CACF,CAEA,mBACExB,KAAA,QAAK6B,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnChC,IAAA,WAAQ+B,SAAS,uBAAAF,MAAA,CAAwBlB,MAAM,CAAG,2BAA2B,CAAG,EAAE,CAAG,CAACsB,IAAI,CAAC,QAAQ,CAACC,OAAO,CAAEb,cAAe,CAAC,CAAC,cAC9HrB,IAAA,SAAM+B,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAEhB,KAAK,CAAO,CAAC,EACjD,CAAC,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import{useContext,useEffect}from\"react\";import CurrentUserContext from\"../../contexts/CurrentUserContext.js\";import useFormValidation from\"../../utils/useFormValidation.js\";import PopupWithForm from\"../PopupWithForm/PopupWithForm.jsx\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditProfilePopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateUser=_ref.onUpdateUser,isLoadingSubmit=_ref.isLoadingSubmit;var currentUser=useContext(CurrentUserContext);var _useFormValidation=useFormValidation(),value=_useFormValidation.value,error=_useFormValidation.error,isValid=_useFormValidation.isValid,isInputValid=_useFormValidation.isInputValid,handleChange=_useFormValidation.handleChange,reset=_useFormValidation.reset,setValues=_useFormValidation.setValues;useEffect(function(){setValues(\"name\",currentUser.name);setValues(\"description\",currentUser.about);},[currentUser,setValues]);function resetClose(){onClose();reset({name:currentUser.name,description:currentUser.about});}function handleSubmit(e){e.preventDefault();onUpdateUser({name:value.name,description:value.description},reset);}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"edit-profile\",title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",isOpen:isOpen,onClose:resetClose,isValid:isValid,isLoadingSubmit:isLoadingSubmit,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{id:\"name\",name:\"name\",type:\"text\",placeholder:\"\\u0418\\u043C\\u044F\",className:\"popup__input popup__input_text_name \".concat(isInputValid.name===undefined||isInputValid.name?'':'popup__input_error'),required:\"\",minLength:2,maxLength:40,onChange:handleChange,value:value.name?value.name:\"\",disabled:isLoadingSubmit}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error\",id:\"name-error\",children:error.name}),/*#__PURE__*/_jsx(\"input\",{id:\"description\",name:\"description\",type:\"text\",placeholder:\"\\u041E \\u0441\\u0435\\u0431\\u0435\",className:\"popup__input popup__input_text_description \".concat(isInputValid.description===undefined||isInputValid.description?'':'popup__input_error'),required:\"\",minLength:2,maxLength:200,onChange:handleChange,value:value.description?value.description:\"\",disabled:isLoadingSubmit}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error\",id:\"description-error\",children:error.description})]});}","map":{"version":3,"names":["useContext","useEffect","CurrentUserContext","useFormValidation","PopupWithForm","jsx","_jsx","jsxs","_jsxs","EditProfilePopup","_ref","isOpen","onClose","onUpdateUser","isLoadingSubmit","currentUser","_useFormValidation","value","error","isValid","isInputValid","handleChange","reset","setValues","name","about","resetClose","description","handleSubmit","e","preventDefault","title","onSubmit","children","id","type","placeholder","className","concat","undefined","required","minLength","maxLength","onChange","disabled"],"sources":["C:/Users/User/Desktop/dev/react-mesto-auth/src/components/EditProfilePopup/EditProfilePopup.jsx"],"sourcesContent":["import { useContext, useEffect } from \"react\";\r\nimport CurrentUserContext from \"../../contexts/CurrentUserContext.js\";\r\nimport useFormValidation from \"../../utils/useFormValidation.js\";\r\nimport PopupWithForm from \"../PopupWithForm/PopupWithForm.jsx\";\r\n\r\nexport default function EditProfilePopup({ isOpen, onClose, onUpdateUser, isLoadingSubmit }) {\r\n  const currentUser = useContext(CurrentUserContext)\r\n  const { value, error, isValid, isInputValid, handleChange, reset, setValues } = useFormValidation();\r\n \r\n    useEffect(() => {\r\n      setValues(\"name\", currentUser.name)\r\n      setValues(\"description\", currentUser.about)\r\n    },[currentUser, setValues])\r\n\r\n    function resetClose() {\r\n      onClose()\r\n      reset({name: currentUser.name, description: currentUser.about })\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n      e.preventDefault()\r\n      onUpdateUser({ name: value.name, description: value.description}, reset)\r\n    }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"edit-profile\"\r\n      title=\"Редактировать профиль\"\r\n      isOpen={isOpen}\r\n      onClose={resetClose}\r\n      isValid={isValid}\r\n      isLoadingSubmit={isLoadingSubmit}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input\r\n        id=\"name\"\r\n        name=\"name\"\r\n        type=\"text\"\r\n        placeholder=\"Имя\"\r\n        className={`popup__input popup__input_text_name ${isInputValid.name === undefined || isInputValid.name ? '' : 'popup__input_error'}`}\r\n        required=\"\"\r\n        minLength={2}\r\n        maxLength={40}\r\n        onChange={handleChange}\r\n        value={value.name ? value.name : \"\"}\r\n        disabled={isLoadingSubmit}\r\n      />\r\n      <span className=\"popup__error\" id=\"name-error\">\r\n        {error.name}\r\n      </span>\r\n      <input\r\n        id=\"description\"\r\n        name=\"description\"\r\n        type=\"text\"\r\n        placeholder=\"О себе\"\r\n        className={`popup__input popup__input_text_description ${isInputValid.description === undefined || isInputValid.description ? '' : 'popup__input_error'}`}\r\n        required=\"\"\r\n        minLength={2}\r\n        maxLength={200}\r\n        onChange={handleChange}\r\n        value={value.description ? value.description : \"\"}\r\n        disabled={isLoadingSubmit}\r\n      />\r\n      <span className=\"popup__error\" id=\"description-error\">\r\n        {error.description}\r\n      </span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}